
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer">
      
      
        <meta name="author" content="Dimitri Bokatov, Yaroslav Bondar, Taylan Kucuk">
      
      
      
      
      
      <link rel="icon" href="../../template_assets/cisco_logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Mission 5: Last Agent Routing - LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mission-5-last-agent-routing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer" class="md-header__button md-logo" aria-label="LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer" data-md-component="logo">
      
  <img src="../../template_assets/cisco_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mission 5: Last Agent Routing
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../welcome/" class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../coreLab1/" class="md-tabs__link">
          
  
  
    
  
  Core

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../adventureList/" class="md-tabs__link">
        
  
  
    
  
  Adventure Section

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../cheatsheet/" class="md-tabs__link">
        
  
  
    
  
  Cheat Sheet

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../slido-QA-iFrame/" class="md-tabs__link">
        
  
  
    
  
  Ask a Question<i class="fa-solid fa-hand" style="color:#63E6BE;"></i>

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer" class="md-nav__button md-logo" aria-label="LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer" data-md-component="logo">
      
  <img src="../../template_assets/cisco_logo.png" alt="logo">

    </a>
    LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../welcome/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coreLab1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coreLab2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coreLab3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coreLab4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coreLab5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../json/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding JSON
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adventureList/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adventure Section
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cheat Sheet
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../slido-QA-iFrame/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ask a Question<i class="fa-solid fa-hand" style="color:#63E6BE;"></i>
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="mission-5-last-agent-routing">Mission 5: Last Agent Routing</h1>
<h2 id="story">Story</h2>
<p>A common request for returning customers calling into a contact center is to work with the last person with which they had a good experience.  This may be because they are already familiar with what the customer needs or it may just be that the customer is familiar with the agent and enjoyed their last interaction. With the new Auto CSAT feature in the Webex Contact Center we can automatically account for this request and route to the last agent which had a high Auto CSAT with the customer.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because this is a lab environment and you will be playing both the role of the customer and agent, we are going to use a simulated CSAT as it would be difficult to properly score a call in these conditions.  </p>
</div>
<h3 id="high-level-explanation">High Level Explanation</h3>
<ol>
<li>New call comes into the flow</li>
<li>Call the Search API to find the last agent with which they had a good CSAT</li>
<li>If the agent is available, we will route the call to that agent</li>
<li>If the agent is not available or if no recent good CSAT scores exits for the caller, we will route the call to the queue for the next available agent. </li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>We are going to touch Subflow which is the feature that enables easier management of complex flows by breaking down commonly used and repeated portions into reusable subflows. This improves readability of flows, increases reusability of repeated functionality in the subflow, as well as improves development time since there is no redundant design of the same flows.</br>
  Subflows also introduce the ability to share commonly used subroutines between developers, between customers and will help unlock a library of subflows available in the marketplace.</p>
<h2 id="preconfigured-elements">Preconfigured elements</h2>
<ol>
<li>Wait treatment Subflow which will provide Music in Queue and Queue Messages. </li>
<li>Connector for calling Webex Contact Center APIs</li>
<li>Agent Editable and Reportable Global Variable for our simulated CSAT</li>
</ol>
<hr />
<h2 id="build">Build</h2>
<ol>
<li>
<p>Create a flow named <strong><span class="attendee-id-container">LastAgentRouting_<span class="attendee-id-placeholder" data-prefix="LastAgentRouting_">Your_Attendee_ID</span><span class="copy" title="Click to copy!"></span></span></strong> and add these flow variables:</p>
<ul>
<li>Callback Status variable:</li>
</ul>
<blockquote>
<p>Name: <strong>agentID</strong><span class="copy-static" data-copy-text="agentID"><span class="copy" title="Click to copy!"></span></span></p>
<p>Type: <strong>String</strong></p>
<p>Default Value: <strong>empty</strong></p>
</blockquote>
<ul>
<li>Callback Connect Time variable:</li>
</ul>
<blockquote>
<p>Name: <strong>queriedCSAT</strong><span class="copy-static" data-copy-text="queriedCSAT"><span class="copy" title="Click to copy!"></span></span></p>
<p>Type: <strong>Decimal</strong></p>
<p>Default Value: <strong>0.0</strong><span class="copy-static" data-copy-text="0.0"><span class="copy" title="Click to copy!"></span></span></p>
</blockquote>
</li>
<li>
<p>Add the Global Variable <strong>simulatedCSAT</strong><span class="copy-static" data-copy-text="simulatedCSAT"><span class="copy" title="Click to copy!"></span></span> to the flow</p>
<blockquote>
<p>There are no values to set because it has already been configured globally</p>
</blockquote>
<p><a class="glightbox" href="../../graphics/Lab2/L2M5_CreateFlow.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/L2M5_CreateFlow.gif" /></a></p>
</li>
<li>
<p>Add a <strong>Play Message</strong> node </p>
<blockquote>
<p>Connect the <strong>New Phone Contact</strong> node edge to this <strong>Play Message</strong> node</p>
<p>Enable Text-To-Speech</p>
<p>Select the Connector: <strong>Cisco Cloud Text-to-Speech</strong></p>
<p>Click the Add Text-to-Speech Message button</p>
<p>Delete the Selection for Audio File</p>
<p>Text-to-Speech Message: <strong><em>Welcome to Mission 5 of Advanced Routing mission.</em></strong><span class="copy-static" data-copy-text="Welcome to Mission 5 of Advanced Routing mission."><span class="copy" title="Click to copy!"></span></span></p>
</blockquote>
<p><a class="glightbox" href="../../graphics/Lab2/L2M5_PlayMessage.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/L2M5_PlayMessage.gif" /></a></p>
</li>
<li>
<p>Add an <strong>HTTP Request</strong> node for our query</p>
<blockquote>
<p>Connect the output node edge from the <strong>Play Message</strong> node to this node</p>
<p>Select Use Authenticated Endpoint</p>
<p>Connector: <strong>WxCC_API</strong></p>
<p>Path: <strong>/search</strong></p>
<p>Method: <strong>POST</strong></p>
<p>Content Type: <strong>Application/JSON</strong></p>
<p>Copy this GraphQL query into the request body:
<div class="language-JSON highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">{</span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="s2">&quot;query simulatedCSAT($from:Long! $to:Long! $timeComparator:QueryTimeType $filter:TaskFilters $name:String!){task(from:$from,to:$to,timeComparator:$timeComparator,filter:$filter){tasks{owner{name id}simulatedCSAT:doubleGlobalVariables(name:$name){name value}}}}&quot;</span><span class="p">,</span><span class="nt">&quot;variables&quot;</span><span class="p">:{</span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="s2">&quot;{{now() | epoch(inMillis=true) - 604800000}}&quot;</span><span class="p">,</span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="s2">&quot;{{now() | epoch(inMillis=true)}}&quot;</span><span class="p">,</span><span class="nt">&quot;timeComparator&quot;</span><span class="p">:</span><span class="s2">&quot;endedTime&quot;</span><span class="p">,</span><span class="nt">&quot;filter&quot;</span><span class="p">:{</span><span class="nt">&quot;and&quot;</span><span class="p">:[{</span><span class="nt">&quot;status&quot;</span><span class="p">:{</span><span class="nt">&quot;equals&quot;</span><span class="p">:</span><span class="s2">&quot;ended&quot;</span><span class="p">}},{</span><span class="nt">&quot;origin&quot;</span><span class="p">:{</span><span class="nt">&quot;equals&quot;</span><span class="p">:</span><span class="s2">&quot;{{NewPhoneContact.ANI}}&quot;</span><span class="p">}},{</span><span class="nt">&quot;doubleGlobalVariables&quot;</span><span class="p">:{</span><span class="nt">&quot;name&quot;</span><span class="p">:{</span><span class="nt">&quot;equals&quot;</span><span class="p">:</span><span class="s2">&quot;simulatedCSAT&quot;</span><span class="p">},</span><span class="nt">&quot;value&quot;</span><span class="p">:{</span><span class="nt">&quot;gte&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">}}}]},</span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;simulatedCSAT&quot;</span><span class="p">}}</span>
</span></code></pre></div>
<details><summary>Expanded Query For Understanding (optional)</summary>
<div class="language-GraphQL highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">query</span><span class="w"> </span><span class="nf">simulatedCSAT</span><span class="p">(</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="nv">$from</span><span class="p">:</span><span class="w"> </span><span class="nc">Long</span><span class="p">!</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="nv">$to</span><span class="p">:</span><span class="w"> </span><span class="nc">Long</span><span class="p">!</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="nv">$timeComparator</span><span class="p">:</span><span class="w"> </span><span class="nc">QueryTimeType</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span><span class="nv">$filter</span><span class="p">:</span><span class="w"> </span><span class="nc">TaskFilters</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="nv">$name</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">!</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span><span class="n">task</span><span class="p">(</span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="nv">$from</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="p">:</span><span class="w"> </span><span class="nv">$to</span><span class="p">,</span><span class="w"> </span><span class="n">timeComparator</span><span class="p">:</span><span class="w"> </span><span class="nv">$timeComparator</span><span class="p">,</span><span class="w"> </span><span class="n">filter</span><span class="p">:</span><span class="w"> </span><span class="nv">$filter</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="n">tasks</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">      </span><span class="n">owner</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="c">#Agent Name</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">        </span><span class="n">id</span><span class="w"> </span><span class="c">#Agent ID</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">      </span><span class="nl">simulatedCSAT</span><span class="p">:</span><span class="w"> </span><span class="n">doubleGlobalVariables</span><span class="p">(</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="nv">$name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">        </span><span class="n">name</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">        </span><span class="n">value</span><span class="w"> </span><span class="c">#Value of the simulatedCSAT</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="p">}</span>
</span></code></pre></div>
<div class="language-JSON highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="err">Variables</span><span class="p">:</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="p">{</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{now() | epoch(inMillis=true) - 604800000}}&quot;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="kc">t</span><span class="err">ime</span><span class="w"> </span><span class="kc">n</span><span class="err">ow</span><span class="w"> </span><span class="mi">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">week</span><span class="w"> </span><span class="err">represe</span><span class="kc">nte</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">n</span><span class="w"> </span><span class="err">EPOCH</span><span class="w"> </span><span class="kc">t</span><span class="err">ime(ms)</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">  </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{now() | epoch(inMillis=true)}}&quot;</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="kc">t</span><span class="err">ime</span><span class="w"> </span><span class="kc">n</span><span class="err">ow</span><span class="w"> </span><span class="err">represe</span><span class="kc">nte</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">n</span><span class="w"> </span><span class="err">EPOCH</span><span class="w"> </span><span class="kc">t</span><span class="err">ime(ms)</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span><span class="nt">&quot;timeComparator&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;endedTime&quot;</span><span class="p">,</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">  </span><span class="nt">&quot;filter&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="nt">&quot;and&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">        </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">          </span><span class="nt">&quot;equals&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ended&quot;</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">        </span><span class="nt">&quot;origin&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">          </span><span class="nt">&quot;equals&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{NewPhoneContact.ANI}}&quot;</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">      </span><span class="p">},</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">      </span><span class="p">{</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">        </span><span class="nt">&quot;doubleGlobalVariables&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">#Fil</span><span class="kc">ter</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="err">o</span><span class="kc">n</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">Global</span><span class="w"> </span><span class="err">Variable</span><span class="w"> </span><span class="err">simula</span><span class="kc">te</span><span class="err">dCSAT</span><span class="w"> </span><span class="kc">t</span><span class="err">o</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">grea</span><span class="kc">ter</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">equal</span><span class="w"> </span><span class="kc">t</span><span class="err">o</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">          </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">            </span><span class="nt">&quot;equals&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;simulatedCSAT&quot;</span><span class="w"> </span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">          </span><span class="p">},</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">          </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">            </span><span class="nt">&quot;gte&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">          </span><span class="p">}</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;simulatedCSAT&quot;</span><span class="w"> </span><span class="err">#The</span><span class="w"> </span><span class="err">Alias</span><span class="w"> </span><span class="kc">na</span><span class="err">me</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="kc">f</span><span class="err">or</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">global</span><span class="w"> </span><span class="err">variable</span><span class="w"> </span><span class="err">i</span><span class="kc">n</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">re</span><span class="kc">turne</span><span class="err">d</span><span class="w"> </span><span class="kc">f</span><span class="err">ields</span>
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a><span class="p">}</span>
</span></code></pre></div>
</details></p>
<p>Parse Settings:</p>
<ul>
<li>
<p>Content Type: <strong>JSON</strong></p>
</li>
<li>
<p>Output Variable: <code>agentID</code><span class="copy-static" data-copy-text="agentID"><span class="copy" title="Click to copy!"></span></span></p>
</li>
<li>
<p>Path Expression: <code>$.data.task.tasks[0].owner.id</code><span class="copy-static" data-copy-text="$.data.task.tasks[0].owner.id"><span class="copy" title="Click to copy!"></span></span></p>
</li>
<li>
<p>Output Variable: <code>queriedCSAT</code><span class="copy-static" data-copy-text="queriedCSAT"><span class="copy" title="Click to copy!"></span></span></p>
</li>
<li>
<p>Path Expression: <code>$.data.task.tasks[0].simulatedCSAT.value</code><span class="copy-static" data-copy-text="$.data.task.tasks[0].simulatedCSAT.value"><span class="copy" title="Click to copy!"></span></span>
</p>
</li>
</ul>
</blockquote>
<p><a class="glightbox" href="../../graphics/Lab2/L2M5_HTTPRequest.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/L2M5_HTTPRequest.gif" /></a></p>
</li>
<li>
<p>Add a <strong>Condition</strong> node</p>
<blockquote>
<p>Connect the output node edge from teh <strong>HTTP Request</strong> node to this node</p>
<p>We will connect the <strong>True</strong> node in a future step.</p>
<p>Expression: <code>{{agentID is empty}}</code><span class="copy-static" data-copy-text="{{agentID is empty}}"><span class="copy" title="Click to copy!"></span></span></p>
<p><a class="glightbox" href="../../graphics/Lab2/L2M5_Condition.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/L2M5_Condition.gif" /></a></p>
</blockquote>
</li>
<li>
<p>Add a <strong>Queue To Agent</strong> node</p>
<blockquote>
<p>Connect the <strong>False</strong> node edge of the <strong>Condition</strong> node created in previous step to this <strong>Queue To Agent</strong>.</p>
<p>Agent Variable: <strong>agentID</strong><span class="copy-static" data-copy-text="agentID"><span class="copy" title="Click to copy!"></span></span></p>
<p>Agent Lookup Type: <strong>ID</strong><span class="copy-static" data-copy-text="ID"><span class="copy" title="Click to copy!"></span></span></p>
<p>Set Contact Priority: <strong>True</strong></p>
<p>Select Static Priority</p>
<p>Static Priority Value: <strong>P1</strong></p>
<p>Reporting Queue: <strong><span class="attendee-id-container"><span class="attendee-id-placeholder" data-suffix="_Queue">Your_Attendee_ID</span>_Queue<span class="copy" title="Click to copy!"></span></span></strong></p>
<p>Park Contact if Agent Unavailable: <strong>False</strong></p>
<p>Recovery Queue: <strong><span class="attendee-id-container"><span class="attendee-id-placeholder" data-suffix="_Queue">Your_Attendee_ID</span>_Queue<span class="copy" title="Click to copy!"></span></span></strong>
</p>
</blockquote>
<p><a class="glightbox" href="../../graphics/Lab2/L2M5_QtoAgent.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/L2M5_QtoAgent.gif" /></a></p>
</li>
<li>
<p>Add a <strong>Queue Contact</strong> node</p>
<blockquote>
<p>Connect <strong>Queue To Agent</strong> Output and Error node edges created in previous step to this <strong>Queue Contact</strong></p>
<p>Connect the <strong>True</strong> node edge from the <strong>Condition</strong> node created in <strong>Step 4</strong> to this node</p>
<p>Select Static Queue</p>
<p>Queue: <strong><span class="attendee-id-container"><span class="attendee-id-placeholder" data-suffix="_Queue">Your_Attendee_ID</span>_Queue<span class="copy" title="Click to copy!"></span></span></strong></p>
<p><a class="glightbox" href="../../graphics/Lab2/L2M5_QueueContact.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/L2M5_QueueContact.gif" /></a></p>
</blockquote>
</li>
<li>
<p>Add a <strong>Subflow</strong> node and <strong>DisconnectContact</strong> node</p>
<blockquote>
<p>In the Activity Library pane on the left side of the screen, click <strong>Subflows</strong></p>
<p>Find the <strong>Subflow</strong> names <strong>WaitTreatment</strong> and drag it onto the flow canvas like you would any other node.</p>
<p>Connect the output node edge from this node to the <strong>DisconnectContact</strong> node.</p>
<p>Connect the <strong>Queue Contact</strong> node edge that we created in previous step to this <strong>Subflow</strong> node</p>
<p>Subflow Label: <strong>Latest</strong></p>
<p>Enable automatic updates: <strong>True</strong></p>
<p>Subflow Input Variables: <strong>None</strong></p>
<p>Subflow Output Variables: <strong>None</strong></p>
<p><a class="glightbox" href="../../graphics/Lab2/L2M5_Subflow.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/L2M5_Subflow.gif" /></a>   </p>
</blockquote>
<p><details><summary>Check your flow</summary><a class="glightbox" href="../../graphics/Lab2/L2M5_LARwCSAT.png" data-type="image" data-width="100%" data-height="auto" data-title="Profiles" data-desc-position="top"><img alt="Profiles" src="../../graphics/Lab2/L2M5_LARwCSAT.png" /></a></details></p>
</li>
<li>
<p>Publish your flow</p>
<blockquote>
<p>Turn on Validation at the bottom right corner of the flow builder</p>
<p>If there are no Flow Errors, Click <strong>Publish</strong></p>
<p>Add a publish note</p>
<p>Add Version Label(s): <strong>Latest</strong> </p>
<p>Click <strong>Publish</strong> Flow</p>
</blockquote>
</li>
<li>
<p>Map your flow to your inbound channel</p>
<blockquote>
<p>Navigate to Control Hub &gt; Contact Center &gt; Channels</p>
<p>Locate your Inbound Channel (you can use the search): <strong><span class="attendee-id-container"><span class="attendee-id-placeholder" data-suffix="_Channel">Your_Attendee_ID</span>_Channel<span class="copy" title="Click to copy!"></span></span></strong></p>
<p>Select the Routing Flow: <strong><span class="attendee-id-container">LastAgentRouting_<span class="attendee-id-placeholder" data-prefix="LastAgentRouting_">Your_Attendee_ID</span><span class="copy" title="Click to copy!"></span></span></strong></p>
<p>Select the Version Label: <strong>Latest</strong></p>
<p>Click Save in the lower right corner of the screen</p>
</blockquote>
<h2 id="_1"><a class="glightbox" href="../../graphics/Lab2/L2M5_Publish%26EPmap.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/L2M5_Publish%26EPmap.gif" /></a></h2>
</li>
</ol>
<h2 id="testing">Testing</h2>
<ol>
<li>Your Agent desktop session should be still active but if not, use Webex CC Desktop application <a class="glightbox" href="../../graphics/overview/Desktop_Icon40x40.png" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/overview/Desktop_Icon40x40.png" /></a> and login with agent credentials you have been provided <strong><span class="attendee-id-container">wxcclabs+agent_ID<span class="attendee-id-placeholder" data-prefix="wxcclabs+agent_ID" data-suffix="@gmail.com">Your_Attendee_ID</span>@gmail.com<span class="copy" title="Click to copy!"></span></span></strong>. You will see another login screen with OKTA on it where you may need to enter the email address again and the password provided to you.</li>
<li>On your Agent Desktop, set your status to available<ol>
<li>Using Webex, place a call to your Inbound Channel number <strong><span class="attendee-id-container"><span class="attendee-id-placeholder" data-suffix="_Channel">Your_Attendee_ID</span>_Channel<span class="copy" title="Click to copy!"></span></span></strong></li>
<li>You should be offered a call, click on the accept button. (You may want to mute the mic on both Webex and the Agent Desktop)</li>
<li>In the Agent Desktop you will see a new field in Call Information section where you can edit the Simulated CSAT.  Enter a value of <strong>2.9</strong><span class="copy-static" data-copy-text="2.9"><span class="copy" title="Click to copy!"></span></span> and click save.</li>
<li>After a few moments end the call and select a wrapup code.</li>
</ol>
</li>
<li>Using Webex, place another call to your Inbound Channel number <strong><span class="attendee-id-container"><span class="attendee-id-placeholder" data-suffix="_Channel">Your_Attendee_ID</span>_Channel<span class="copy" title="Click to copy!"></span></span></strong><ol>
<li>You should be offered the call, click on the accept button.</li>
<li>Enter a value of <strong>3.7</strong><span class="copy-static" data-copy-text="3.7"><span class="copy" title="Click to copy!"></span></span> in for Simulated CSAT and click save.</li>
<li>After a few moments end the call and select a wrapup code.</li>
</ol>
</li>
<li>In your Flow:<ol>
<li>Open the debugger</li>
<li>Select the first interaction (at the bottom of the list)</li>
<li>Trace the steps taken in the flow</li>
<li>Open the last interaction </li>
<li>Trace the steps taken in the flow</li>
</ol>
</li>
<li>Answer these questions:<ol>
<li>Did the second call get routed to your agent via the Queue To Agent node?<ol>
<li>Why or why not</li>
</ol>
</li>
</ol>
</li>
<li>On your Agent Desktop, set your status to not be available</li>
<li>Using Webex, place another call to your Inbound Channel number <strong><span class="attendee-id-container"><span class="attendee-id-placeholder" data-suffix="_Channel">Your_Attendee_ID</span>_Channel<span class="copy" title="Click to copy!"></span></span></strong></li>
<li>After you hear the queue treatment start, change your status to available on the agent desktop.<ol>
<li>You should be offered the call, click on the accept button.</li>
<li>Enter a value of <strong>2.8</strong><span class="copy-static" data-copy-text="2.8"><span class="copy" title="Click to copy!"></span></span> in for Simulated CSAT and click save.</li>
<li>After a few moments end the call and select a wrapup code.</li>
</ol>
</li>
<li>In your Flow:<ol>
<li>Open the debugger</li>
<li>Select the last interaction</li>
<li>Trace the steps taken in the flow</li>
</ol>
</li>
<li>Answer these questions:<ol>
<li>Was the call routed to the Queue to Agent node?</li>
<li>What happened next?<ol>
<li>Why?</li>
<li>What will happen if you call in again starting in the Available status?</li>
</ol>
</li>
</ol>
</li>
<li>Make sure that you are in Available status on the agent desktop.</li>
<li>Using Webex, place another call to your Inbound Channel number <strong><span class="attendee-id-container"><span class="attendee-id-placeholder" data-suffix="_Channel">Your_Attendee_ID</span>_Channel<span class="copy" title="Click to copy!"></span></span></strong><ol>
<li>You should be offered the call, click on the accept button.</li>
<li>After a few moments end the call and select a wrapup code.</li>
</ol>
</li>
<li>In your Flow:<ol>
<li>Open the debugger</li>
<li>Select the last interaction</li>
<li>Trace the steps taken in the flow</li>
</ol>
</li>
<li>Answer the following questions:<ol>
<li>Was the call offered to you from the Queue to Agent node?</li>
<li>What was the value of the variable queriedCSAT (look in the HTTP node step)<ol>
<li>Why?</li>
</ol>
</li>
<li>How do you think that you could change the logic/criteria to meet other business needs? </li>
</ol>
</li>
</ol>
<hr />
<p style="text-align:center"><strong>Congratulations, you have officially completed Last Agent Routing mission! 🎉🎉 </strong></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Cisco Systems Inc. All Rights Reserved.
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.instant", "navigation.top", "navigation.footer", "search.suggest", "content.code.copy", "toc.integrate", "content.tooltips", "content.footnote.tooltips", "codehilite"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../js/copy-button.js"></script>
      
        <script src="../../js/attendee-id.js"></script>
      
        <script src="../../template_assets/newLoad.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": false, "openEffect": "fade", "closeEffect": "fade", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>