
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer">
      
      
        <meta name="author" content="Dimitri Bokatov, Yaroslav Bondar, Taylan Kucuk">
      
      
      
      
      
      <link rel="icon" href="../../template_assets/cisco_logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Mission 3: Callback on Global Error - LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mission-3-callback-on-global-error" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer" class="md-header__button md-logo" aria-label="LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer" data-md-component="logo">
      
  <img src="../../template_assets/cisco_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mission 3: Callback on Global Error
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../welcome/" class="md-tabs__link">
          
  
  
    
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../coreLab1/" class="md-tabs__link">
          
  
  
    
  
  Core

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../adventureList/" class="md-tabs__link">
        
  
  
    
  
  Adventure Section

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../cheatsheet/" class="md-tabs__link">
        
  
  
    
  
  Cheat Sheet

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../slido-QA-iFrame/" class="md-tabs__link">
        
  
  
    
  
  Ask a Question<i class="fa-solid fa-hand" style="color:#63E6BE;"></i>

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer" class="md-nav__button md-logo" aria-label="LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer" data-md-component="logo">
      
  <img src="../../template_assets/cisco_logo.png" alt="logo">

    </a>
    LTRCCT-2296 From Good to Great - Enhancing Customer Experience with the Webex Contact Center Flow Designer
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../welcome/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coreLab1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coreLab2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coreLab3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coreLab4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../coreLab5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lab 5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../json/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding JSON
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adventureList/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adventure Section
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cheatsheet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cheat Sheet
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../slido-QA-iFrame/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ask a Question<i class="fa-solid fa-hand" style="color:#63E6BE;"></i>
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="mission-3-callback-on-global-error">Mission 3: Callback on Global Error</h1>
<h2 id="story">Story</h2>
<p>Imagine a caller is navigating an IVR menu when, suddenly, the call drops due to an unexpected error in the flow. This unplanned interruption leaves the customer disconnected without completing their request. In this scenario we are going to configure our flow to schedule a callback to the caller when such failure scenario occurs.</p>
<h2 id="call-flow-overview">Call Flow Overview</h2>
<ol>
<li>A new call enters the flow. </br></li>
<li>The flow executes the logic by querying external database for Outbound Channel and ANI.</br></li>
<li>The call is routed to the appropriate queue, but no agents are available.</br></li>
<li>On a callback offering a new option should be selected to simulate an error and drop the call. </br></li>
<li>Once an agent becomes available, the callback is initiated to the  number.</br></li>
</ol>
<h2 id="mission-details">Mission Details</h2>
<p>Your mission is to:</p>
<ol>
<li>Simulate a global error scenario to trigger a Global Error Event and initiate a workflow to reconnect with a caller whose call was disconnected due to an undefined error. </br></li>
<li>Configure an API POST request to schedule a callback when global error happens. You cannot rely on the Callback node in Main Flow because the call leg is no longer active after termination. Instead, you must design a custom solution to address this limitation.</br></li>
<li>You do not need to configure Outdial Channel and Ourdial Queue as they have been preconfigured for you: </br><ul>
<li><strong><span class="attendee-id-container">Outdial_<span class="attendee-id-placeholder" data-prefix="Outdial_" data-suffix="_Channel">Your_Attendee_ID</span>_Channel<span class="copy" title="Click to copy!"></span></span></strong> </br></li>
<li>Outdial queue <strong><span class="attendee-id-container">Outdial_<span class="attendee-id-placeholder" data-prefix="Outdial_" data-suffix="_Queue">Your_Attendee_ID</span>_Queue<span class="copy" title="Click to copy!"></span></span></strong> to which your <strong><span class="attendee-id-placeholder">Your_Attendee_ID</span>_Team</strong> has been assigned. </br></li>
</ul>
</li>
<li>Simulate a real API server. You will use <a href="https://mockapi.io/" target="_blank"><strong>MockAPI</strong></a> to retrieve the Outdial channel ID and the target callback number. The retrieved Outdial channel ID will then be used in the Callback API POST request.</li>
</ol>
<blockquote>
<p><strong><details><summary>Good to Know <span style="color: orange;">[Optional]</span></summary></strong></p>
<p>We are starting to use Webex Contact Center APIs in this mission. More information can be found in the <a href="https://developer.webex-cx.com/" target="_blank"><strong>Webex Contact Center for Developers</strong></a> portal.</p>
<p>For more information of how you can use MockAPI please watch these Vidcasts: 
<a href="https://app.vidcast.io/share/ce058b71-109e-4929-b9ca-46b83d94f7e3" target="_blank"><strong>[ADVANCED] Use MockAPI to enhance your Demos - PART 1</strong></a> and <a href="https://app.vidcast.io/share/1e259a34-7e9e-44d9-aa5a-5d76e07256a3" target="_blank"><strong>[ADVANCED] Use MockAPI to enhance your Demos - PART 2</strong></a></p>
</details>
</blockquote>
<h2 id="build">Build</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>We are going to extend the same flow by adding additional functionality to simulate a global error scenario which will trigger a callback to a caller.</strong> </p>
</div>
<ol>
<li>Switch to the Flow Designer. Open your flow <strong>Main_Flow_<span class="attendee-id-placeholder">Your_Attendee_ID</span></strong> and make sure <strong>Edit</strong> toggle is <strong>ON</strong>.</li>
<li>
<p>On the right-hand side, in the <strong>Global Flow Properties</strong> panel, scroll down to locate the <strong>Flow Variables</strong> section under <strong>Custom Variables</strong>. Click the <strong>Add Flow Variable</strong> button and add the following 4 flow variables:  </p>
<ul>
<li>Outdial Entry Point Variable :</li>
</ul>
<blockquote>
<p>Name: <strong>outdialcbid</strong><span class="copy-static" data-copy-text="outdialcbid"><span class="copy" title="Click to copy!"></span></span></p>
<p>Type: <strong>String</strong></p>
<p>Default Value: <strong>empty</strong></p>
</blockquote>
<ul>
<li>Custom ANI variable:</li>
</ul>
<blockquote>
<p>Name: <strong>customani</strong><span class="copy-static" data-copy-text="customani"><span class="copy" title="Click to copy!"></span></span></p>
<p>Type: <strong>String</strong></p>
<p>Default Value: <strong>empty</strong></p>
</blockquote>
<ul>
<li>HTTP GET Result variable:</li>
</ul>
<blockquote>
<p>Name: <strong>getresult</strong><span class="copy-static" data-copy-text="getresult"><span class="copy" title="Click to copy!"></span></span></p>
<p>Type: <strong>String</strong></p>
<p>Default Value: <strong>empty</strong></p>
</blockquote>
<ul>
<li>Simulated Error variable:</li>
</ul>
<blockquote>
<p>Name: <strong>simulatederror</strong><span class="copy-static" data-copy-text="simulatederror"><span class="copy" title="Click to copy!"></span></span></p>
<p>Type: <strong>String</strong></p>
<p>Default Value: <strong>empty</strong></p>
</blockquote>
<p><a class="glightbox" href="../../graphics/Lab2/AM1_AddFlowVars.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/AM1_AddFlowVars.gif" /></a></p>
</li>
<li>
<p>Click on <strong>WantCallback</strong> node  </p>
<blockquote>
<p>Add Option 3. Name it as <strong>Simulate an error</strong></p>
<p>Text-to-Speech Message: <strong><em>All agents are busy. Please press 1 if you want to schedule a callback. Press 2 if you want to wait in queue. Press 3 to simulate global error.</em></strong><span class="copy-static" data-copy-text="All agents are busy. Please press 1 if you want to schedule a callback. Press 2 if you want to wait in queue. Press 3 to simulate global error."><span class="copy" title="Click to copy!"></span></span>. We are extending the existing message by adding Option 3.</p>
</blockquote>
<p><a class="glightbox" href="../../graphics/Lab2/AM2_AddOption3.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/AM2_AddOption3.gif" /></a></p>
</li>
<li>
<p>Add an <strong>HTTP Request</strong> node for our query. We are going to fetch Outbound Channel/Entry Point ID and custom ANI. Remember we used the same Cisco Worldwide Support contact number in Mission 3 of Fundamental labs.</p>
<blockquote>
<p>Connect <strong>WantCallback</strong> Option 3 to this HTTP node</p>
<p>We will connct <strong>HTTP Request</strong> node in next step</p>
<p>Activity Name: <strong>GET_CBID</strong><span class="copy-static" data-copy-text="GET_CBID"><span class="copy" title="Click to copy!"></span></span></p>
<p>Use Authenticated Endpoint: <strong>Off</strong></p>
<p>Requestt URL: <strong><em>https://674481b1b4e2e04abea27c6e.mockapi.io/flowdesigner/Lab/DynVars?dn={{NewPhoneContact.DNIS | slice(2) }}</em></strong><span class="copy-static" data-copy-text="https://674481b1b4e2e04abea27c6e.mockapi.io/flowdesigner/Lab/DynVars?dn={{NewPhoneContact.DNIS | slice(2) }}"><span class="copy" title="Click to copy!"></span></span></p>
<p>Method: <strong>GET</strong></p>
<p>Content Type: <strong>Application/JSON</strong></p>
<p><strong>Parsing Settings:</strong></p>
<p>Content Type: <strong>JSON</strong> </p>
<p>Output Variable: <strong>outdialcbid</strong><span class="copy-static" data-copy-text="outdialcbid"><span class="copy" title="Click to copy!"></span></span></p>
<p>Path Expression: <strong>$[0].outboundcallbackep</strong><span class="copy-static" data-copy-text="$[0].outboundcallbackep"><span class="copy" title="Click to copy!"></span></span></p>
<p>Click <strong>Add New</strong></p>
<p>Output Variable: <strong>customani</strong><span class="copy-static" data-copy-text="customani"><span class="copy" title="Click to copy!"></span></span></p>
<p>Path Expression: <strong>$[0].tacnumber</strong><span class="copy-static" data-copy-text="$[0].tacnumber"><span class="copy" title="Click to copy!"></span></span></p>
</blockquote>
<p><a class="glightbox" href="../../graphics/Lab2/AM2_HTTPRequest1.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/AM2_HTTPRequest1.gif" /></a></p>
<blockquote>
<p><strong><details><summary></strong>Test your API Source<strong><span style="color: orange;">[Optional]</span></summary></strong></p>
<ol>
<li>
<p>Test your API resource. <strong>https://674481b1b4e2e04abea27c6e.mockapi.io/flowdesigner/Lab/DynVars?dn={DNIS}</strong><span class="copy-static" data-copy-text="https://674481b1b4e2e04abea27c6e.mockapi.io/flowdesigner/Lab/DynVars?dn={DNIS}"><span class="copy" title="Click to copy!"></span></span></p>
</li>
<li>
<p>Replace {DNIS} with the provided DNIS number stripping +1</p>
</li>
</ol>
<p><span style="color: orange;">[Example:]</span> If your number <strong>+14694096861</strong>, then your GET Query should be <strong><em>https://674481b1b4e2e04abea27c6e.mockapi.io/flowdesigner/Lab/DynVars?dn=4694096861</em></strong></p>
<ol>
<li>Open Chrome browser and past your URL. You should get the follwoing result</li>
</ol>
<p><a class="glightbox" href="../../graphics/Lab2/BM2-8-Chrometest.gif" data-type="image" data-width="100%" data-height="auto" data-title="Profiles" data-desc-position="top"><img alt="Profiles" src="../../graphics/Lab2/BM2-8-Chrometest.gif" /></a></p>
<ol>
<li>
<p>Test JSON Path in the following tool <a href="https://jsonpath.com/" target="_blank">https://jsonpath.com/</a></p>
</li>
<li>
<p>Paste your GET URL into the Browser address line and copy the output in square brackets (including brackets)</p>
</li>
<li>
<p>Open <a href="https://jsonpath.com/" target="_blank">https://jsonpath.com/</a> and paste the copied response into <strong>Inputs</strong> window</p>
</li>
<li>
<p>In <strong>JSONPath</strong> box copy and paste one of the path expression from <strong>FetchFlowSettings</strong> to verify your results.</p>
</li>
</ol>
<p><a class="glightbox" href="../../graphics/Lab2/BM2-10-JSONPath.gif" data-type="image" data-width="100%" data-height="auto" data-title="Profiles" data-desc-position="top"><img alt="Profiles" src="../../graphics/Lab2/BM2-10-JSONPath.gif" /></a>
</details></p>
</blockquote>
</li>
<li>
<p>Add <strong>Set Variable</strong> node</p>
<blockquote>
<p>Activity Label: <strong>SetGetResult</strong><span class="copy-static" data-copy-text="SetGetResult"><span class="copy" title="Click to copy!"></span></span></p>
<p>Connect <strong>GET_CBID</strong> to this node</p>
<p>We will connct <strong>Set Variable</strong> node in next step</p>
<p>Variable: <strong>getresult</strong><span class="copy-static" data-copy-text="getresult"><span class="copy" title="Click to copy!"></span></span></p>
<p>Set To Variable: <strong>GET_CBID.httpResponseBody</strong><span class="copy-static" data-copy-text="GET_CBID.httpResponseBody"><span class="copy" title="Click to copy!"></span></span>
</p>
</blockquote>
<p><a class="glightbox" href="../../graphics/Lab2/AM2_SetGetResult.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/AM2_SetGetResult.gif" /></a></p>
</li>
<li>
<p>Add one more <strong>Set Variable</strong> and <strong>Disconnect Contact</strong> nodes. We are going to intentionally configure an incorrect value in the <strong>Set Variable</strong> node to forcibly trigger a Global Error.</p>
<blockquote>
<p>Activity Label: <strong>SimulateGlobalError</strong><span class="copy-static" data-copy-text="SimulateGlobalError"><span class="copy" title="Click to copy!"></span></span></p>
<p>Connect <strong>SetGetResult</strong> to this node</p>
<p>Connect this node to <strong>Disconnect Contact</strong></p>
<p>Variable: <strong>simulatederror</strong><span class="copy-static" data-copy-text="simulatederror"><span class="copy" title="Click to copy!"></span></span></p>
<p>Set Value: <strong><em>{{ ANI | 123}}</em></strong><span class="copy-static" data-copy-text="{{ ANI | 123}}"><span class="copy" title="Click to copy!"></span></span></p>
<p><a class="glightbox" href="../../graphics/Lab2/AM2_SimulateGlobalError.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/AM2_SimulateGlobalError.gif" /></a>    </p>
</blockquote>
</li>
<li>
<p>Navigate to <strong>Event Flows</strong> and delete connection from <strong>OnGlobalError</strong> to <strong>EndFlow</strong>.</p>
</li>
<li>
<p>Add <strong>HTTP Request</strong> node to the flow. In this step we are going to build a <strong>Create Task</strong> API POST request. See <a href="https://developer.webex-cx.com/documentation/tasks/v1/create-task" target="_blank"><strong>Create Task API</strong></a> for details.</p>
<blockquote>
<p>Activity Label: <strong>CallBackAPI_HTTPRequest</strong><span class="copy-static" data-copy-text="CallBackAPI_HTTPRequest"><span class="copy" title="Click to copy!"></span></span></p>
<p>Connect the <strong>OnGlobalError</strong> output edge node to this node</p>
<p>Use Authentication Endpoint: <strong>On</strong></p>
<p>Connector: <strong>WxCC_API</strong></p>
<p>Request Path: <strong>/v1/tasks</strong><span class="copy-static" data-copy-text="/v1/tasks"><span class="copy" title="Click to copy!"></span></span></p>
<p>Method: <strong>POST</strong></p>
<p>Content Type: <strong>Application/JSON</strong></p>
<p>Request Body:
<div class="language-JSON highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nt">&quot;entryPointId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{outdialcbid}}&quot;</span><span class="p">,</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="nt">&quot;destination&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{customani}}&quot;</span><span class="p">,</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">&quot;attributes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;Message&quot;</span><span class="p">:</span><span class="s2">&quot;tester&quot;</span><span class="p">,</span><span class="nt">&quot;To Queue&quot;</span><span class="p">:</span><span class="s2">&quot;sales&quot;</span><span class="p">},</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="nt">&quot;outboundType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;CALLBACK&quot;</span><span class="p">,</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="nt">&quot;mediaType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;telephony&quot;</span><span class="p">,</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="nt">&quot;callback&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="nt">&quot;callbackOrigin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;web&quot;</span><span class="p">,</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="nt">&quot;callbackType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;immediate&quot;</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="p">}</span>
</span></code></pre></div>
<a class="glightbox" href="../../graphics/Lab2/AM2_EventHTTP.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/AM2_EventHTTP.gif" /></a> </p>
</blockquote>
</li>
<li>
<p>Add <strong>Condition</strong> node. In this node we are going to check the status of our API POST request. If HTTP response is <strong>201 Created</strong> the output will be <strong>True</strong> and if other than <strong>201</strong> then <strong>False</strong>.</p>
<blockquote>
<p>Activity Label: <strong>HTTPStatusCode</strong><span class="copy-static" data-copy-text="HTTPStatusCode"><span class="copy" title="Click to copy!"></span></span></p>
<p>Connect the output node edge from the <strong>CallBackAPI_HTTPRequest</strong> node to this node</p>
<p>Connect both <strong>True</strong> and <strong>False</strong> exists to <strong>EndFlow</strong> node. We will be able to see in Debug tool whether request was succsesful or not. </p>
<p>In the Expression section write an expresion <strong><em>{{CallBackAPI_HTTPRequest.httpStatusCode == 201}}</em></strong><span class="copy-static" data-copy-text="{{CallBackAPI_HTTPRequest.httpStatusCode == 201}}"><span class="copy" title="Click to copy!"></span></span></p>
</blockquote>
</li>
<li>
<p>Validate the flow by clicking <strong>Validate</strong>, <strong>Publish</strong> and select the Latest version of the flow.</p>
<p><a class="glightbox" href="../../graphics/Lab2/AM2_EventCondition.gif" data-type="image" data-width="100%" data-height="auto" data-title="profiles" data-desc-position="top"><img alt="profiles" src="../../graphics/Lab2/AM2_EventCondition.gif" /></a> </p>
</li>
<li>
<p>Switch to <strong>Control Hub</strong>. Navigate to <strong>Channels</strong> under <strong>Customer Experience Section</strong>, locate your channel <strong><span class="attendee-id-container"><span class="attendee-id-placeholder" data-suffix="_Channel">Your_Attendee_ID</span>_Channel<span class="copy" title="Click to copy!"></span></span></strong>.</p>
</li>
<li>Click on <strong><span class="attendee-id-placeholder">Your_Attendee_ID</span>_Channel</strong></li>
<li>
<p>In <strong>Entry Point</strong> settings section change the following, then click <strong>Save</strong> button:</p>
<blockquote>
<p>Routing Flow: <strong>Main_Flow_<span class="attendee-id-placeholder">Your_Attendee_ID</span></strong></p>
<p>Version Label: <strong>Latest</strong></p>
</blockquote>
</li>
</ol>
<h2 id="testing">Testing</h2>
<ol>
<li>Make sure you're logged into Webex CC Desktop application as Agent and set status to <strong>Not Available</strong>. In this case call will not be assigned to an agent and callback will be proposed to a caller.</li>
<li>
<p>Make a call to the Support Number and if success you should hear configured messages.</p>
</li>
<li>
<p>Next message will propose you options to request callback, stay in queue or simulate an error. Press 3 on Webex App DialPad to simulate an error. </p>
</li>
<li>
<p>If everything configured correctly your call should be disconnected.</p>
</li>
<li>
<p>Open Debug tool in your <strong>Main_Flow_<span class="attendee-id-placeholder">Your_Attendee_ID</span></strong> and click on first call in the list which should be the last call you made. Look for <strong>WantCallback</strong> in Activity Name column and make sure the call left <strong>WantCallback</strong> out of Option 3 and continue through <strong>GET_CBID</strong>.</p>
</li>
<li>
<p>Click on either <strong>GET_CBID</strong> node of the flow or on Activity Name <strong>GET_CBID</strong> n the Debug tool and scroll to the bottom the right hand side section of Debug tool. Under <strong>Modified Variables</strong> you should see values assigned to <strong>outdialcbid</strong> and <strong>customani</strong> flow variables. Where <strong>outdialcbid</strong> is ID of your <strong><span class="attendee-id-container">Outdial_<span class="attendee-id-placeholder" data-prefix="Outdial_" data-suffix="_Channel">Your_Attendee_ID</span>_Channel<span class="copy" title="Click to copy!"></span></span></strong> and <strong>customani</strong> is a well known Cisco Worldwide Support contact number <strong>1 408 526 7209</strong>. The same number we used in previous exercise.  This time we used an external database as well as GET API call to extract that number.</p>
</li>
<li>
<p>While still on Debug tool, click on <strong>SetGetResult</strong> to see full response from HTTP request that we wrote into <strong>getresult</strong> flow variable.</p>
</li>
<li>
<p>Make sure <strong>SimulateGlobalError</strong> activity name has an <strong>Error</strong> next to it in <strong>Outcome</strong> column. That mean you succesfully simulated <strong>Global Error</strong> event.</p>
</li>
<li>
<p>Click on next activity name <strong>GlobalErrorHandling</strong> which goes after <strong>SimulateGlobalError</strong> activity name. Flow Designer automaticaly will open <strong>Event Flows</strong> tab.</p>
</li>
<li>
<p>Observe <strong>Condition</strong> node to make sure exit went out via <strong>True</strong> exit. This tells you that HTTP response is <strong>201 Created</strong> and callback has been scheduled succesfully. </p>
</li>
<li>
<p>On Webex Desktop, make your agent <strong>Available</strong>. Contact Center will reserve your agent right away and propose to answer a callback call.</p>
</li>
</ol>
<p><strong>Congratulations on completing another mission.</strong></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Cisco Systems Inc. All Rights Reserved.
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.instant", "navigation.top", "navigation.footer", "search.suggest", "content.code.copy", "toc.integrate", "content.tooltips", "content.footnote.tooltips", "codehilite"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../js/copy-button.js"></script>
      
        <script src="../../js/attendee-id.js"></script>
      
        <script src="../../template_assets/newLoad.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": false, "openEffect": "fade", "closeEffect": "fade", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>